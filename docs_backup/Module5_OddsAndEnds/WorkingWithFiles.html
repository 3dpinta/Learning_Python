

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with Files &mdash; Python Like You Mean It 0.13.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Python Like You Mean It 0.13.0 documentation" href="../index.html"/>
        <link rel="up" title="Module 5: Odds and Ends" href="../module_5.html"/>
        <link rel="prev" title="Matplotlib" href="Matplotlib.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python Like You Mean It
          

          
          </a>

          
            
            
              <div class="version">
                0.13.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Python Like You Mean It</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_1.html">Module 1: Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_2.html">Module 2: The Essentials of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_3.html">Module 3: The Essentials of NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_4.html">Module 4: Object Oriented Programming</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../module_5.html">Module 5: Odds and Ends</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Matplotlib.html">Matplotlib</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Working-with-Paths">Working with Paths</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pathlib.Path">pathlib.Path</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Opening-Files">Opening Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Specifying-the-Open-Mode">Specifying the Open-Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Working-with-the-File-Object">Working with the File Object</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Example:-Writing-and-Reading-a-Text-File">Example: Writing and Reading a Text File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Example:-Writing-and-Reading-NumPy-Arrays">Example: Writing and Reading NumPy Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Links-to-Official-Documentation">Links to Official Documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Like You Mean It</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../module_5.html">Module 5: Odds and Ends</a> &raquo;</li>
        
      <li>Working with Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Module5_OddsAndEnds/WorkingWithFiles.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Working-with-Files">
<h1>Working with Files<a class="headerlink" href="#Working-with-Files" title="Permalink to this headline">¶</a></h1>
<p>This section will discuss the best practices for writing Python code
that involves reading from and writing to files. We will learn about the
built-in <code class="docutils literal"><span class="pre">pathlib.Path</span></code> object, which will help to ensure that the
code that we write is portable across operating systems (OS)
(i.e.&nbsp;Windows vs MacOS vs Linux). We will also be introduced to a
so-called context manager, which will permit us to read-from and
write-to a file safely; by “safely” we mean that we will be assured that
any file that we open will eventually be closed properly, so that it
will not be corrupted even in the event that our code hits an error.</p>
<div class="section" id="Working-with-Paths">
<h2>Working with Paths<a class="headerlink" href="#Working-with-Paths" title="Permalink to this headline">¶</a></h2>
<p>Suppose you are writing a Jupyter notebook where you are analyzing data
that is saved to your computer. You will naturally need to detail the
location where your data is stored on your computer’s file system so
that you can load your data. Let’s suppose that this notebook is in the
directory <code class="docutils literal"><span class="pre">my_folder</span></code> and that there is a directory, <code class="docutils literal"><span class="pre">data</span></code>, within
it, which contains some text files with your data. Thus your directory
structure looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">my_folder</span><span class="o">/</span>
  <span class="o">|-</span><span class="n">notebook</span><span class="o">.</span><span class="n">ipynb</span>
  <span class="o">|-</span><span class="n">data</span><span class="o">/</span>
     <span class="o">|-</span><span class="n">data1</span><span class="o">.</span><span class="n">txt</span>
     <span class="o">|-</span><span class="n">data2</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Now, if you are on a machine that is running Linux or MacOS, the path to
<code class="docutils literal"><span class="pre">data1.txt</span></code> relative to the notebook is: <code class="docutils literal"><span class="pre">./data/data1.txt</span></code>. See
that the character <code class="docutils literal"><span class="pre">/</span></code> is used as a separator used to denote
subsequent directories in a path. On a Windows machine, the separator is
<code class="docutils literal"><span class="pre">\</span></code>, thus the path to your data would be written as
<code class="docutils literal"><span class="pre">.\data\data1.txt</span></code>. We want to write our code so that it can be
utilized, without modification, across operating systems. This where
Python’s fantastic <code class="docutils literal"><span class="pre">pathlib</span></code> module comes in handy.</p>
<div class="section" id="pathlib.Path">
<h3>pathlib.Path<a class="headerlink" href="#pathlib.Path" title="Permalink to this headline">¶</a></h3>
<p>The built-in <a class="reference external" href="https://docs.python.org/3/library/pathlib.html">pathlib
module</a> provides a
number of classes that make it easy to work with file system paths
across operating systems. We will limit our discussion to the
<code class="docutils literal"><span class="pre">pathlib.Path</span></code> class, which will take care of all of our most pressing
needs. This class allows us to write all of our path-related code in a
single way, and it will convert the path to the operating
system-appropriate format for us underneath the hood.</p>
<p>Let’s begin by creating a <code class="docutils literal"><span class="pre">Path</span></code> object that points to the directory
containing the present notebook:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># creating a path-object pointing to the present directory</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="c1"># &#39;.&#39; means: the present directory that this code exists in</span>
</pre></div>
</div>
<p>Because I am running this code from a Windows machine, this will form a
<code class="docutils literal"><span class="pre">WindowsPath</span></code> object automatically:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">root</span>
<span class="go">WindowsPath(&#39;.&#39;)</span>
</pre></div>
</div>
<p>If I were running on a Linux or MacOS machine, it would have formed a
<code class="docutils literal"><span class="pre">PosixPath</span></code> object instead. Fortunately, we need not worry about these
details as these classes handle them for us! The <code class="docutils literal"><span class="pre">Path</span></code> class has many
useful methods for us to leverage. First, see that it conveniently
overrides the <code class="docutils literal"><span class="pre">/</span></code> operator (by implementing a <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module4_OOP/Special_Methods.html">special
method</a>)
so that we can create a path to a subsequent directory. Let’s see this
in action:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># creating a path to a file in a subdirectory</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">path_to_data1</span> <span class="o">=</span> <span class="n">root</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;data1.txt&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">path_to_data1</span>
<span class="n">WindowsPath</span><span class="p">(</span><span class="s1">&#39;data/data1.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See that the <code class="docutils literal"><span class="pre">/</span></code> operator, when used in conjunction with a <code class="docutils literal"><span class="pre">Path</span></code>
instance, created a new path with the appropriate path-separator for the
present OS. This is extremely convenient!</p>
<p>Let’s proceed to explore some other useful methods that <code class="docutils literal"><span class="pre">Path</span></code>
provides us with. These methods enable us to inspect directories and
files, create new directories, list all of the files in a directory,
open files to for reading/writing, and much more. A complete listing of
these methods can be found
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#methods-and-properties">here</a>
and <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#methods">here</a>,
collectively; it is highly recommended that you take time to look
through them.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_to_data1</span> <span class="o">=</span> <span class="n">root</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;data1.txt&quot;</span>

<span class="go"># Checking to see if a file or directory exists:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_to_data1</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">root</span> <span class="o">/</span> <span class="s2">&quot;bogus_path&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="go">False</span>

<span class="go"># Getting the &quot;absolute&quot; path to a file or directory:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_to_data1</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<span class="go">WindowsPath(&#39;C:/Users/TerranceWasabi/Desktop/PLYMI/Module5_OddsAndEnds/data/data1.txt&#39;)</span>

<span class="go"># Access the name of the file that the path is pointing to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path_to_data1</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;data1.txt&#39;</span>

<span class="go"># Create a new directory within the present directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;new_folder&quot;</span><span class="p">)</span>

<span class="go"># Use &#39;glob&#39; to return a generator over all files</span>
<span class="go"># that match a specified pattern. E.g. get path to every</span>
<span class="go"># .txt file in a directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">((</span><span class="n">root</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.txt&quot;</span><span class="p">))</span>
<span class="go">[WindowsPath(&#39;data/data1.txt&#39;), WindowsPath(&#39;data/data2.txt&#39;)]</span>

<span class="go"># convert a path-object to a string formatted for the present OS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">path_to_data1</span><span class="p">)</span>
<span class="go">&#39;data\\data1.txt&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first fa fa-exclamation-circle"><strong>Takeaway</strong>:</p>
<p class="last">You should strive to utilize <code class="docutils literal"><span class="pre">pathlib.Path</span></code> whenever you are working
with file system paths in your code. To reiterate - this will ensure
that your code is portable across operating systems, it will help make
your path handling easy to read, plus this class’s methods provides a
massive amount of functionality for you to leverage at your convenience.</p>
</div>
<div class="admonition warning">
<p class="first fa fa-exclamation-circle"><strong>Note</strong>:</p>
<p class="last"><code class="docutils literal"><span class="pre">pathlib</span></code> was introduced in Python 3.4. Although many 3rd party
libraries have updated their file-I/O utilities to accept both strings
and <code class="docutils literal"><span class="pre">pathlib.Path</span></code> objects (e.g. <code class="docutils literal"><span class="pre">numpy.save</span></code> can be passed a
<code class="docutils literal"><span class="pre">Path</span></code> instance to tell it where to save a numpy-array), some
libraries are late to the party and will only accept strings as paths.
On such occasions you can simple convert your <code class="docutils literal"><span class="pre">Path</span></code> instance to a
string by calling <code class="docutils literal"><span class="pre">str</span></code> on it, and then pass the resulting string-path
to the file-I/O function. This is also a friendly reminder to accomodate
<code class="docutils literal"><span class="pre">pathlib.Path</span></code> objects whenever you find yourself writing your own
file-I/O functions!</p>
</div>
</div>
</div>
<div class="section" id="Opening-Files">
<h2>Opening Files<a class="headerlink" href="#Opening-Files" title="Permalink to this headline">¶</a></h2>
<p>It is recommended that you refer to the <a class="reference external" href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files">official Python
tutorial</a>
for a simple rundown of file reading and writing</p>
<p>Whenever you instruct your code to open a file for reading or writing,
you must take care that the file ultimately is closed so that its data
is not vulnerable to being modified. Python provides the <code class="docutils literal"><span class="pre">open</span></code>
context manager, which is designed to ensure that a file will be closed
even in the event that our code raises an error.</p>
<p>The following code opens the file “file1.txt” for writing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># demonstrating the use of the `open` context manager</span>

<span class="n">path_to_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;file1.txt&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_to_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># The indented space enters the &quot;context&quot; of the open file.</span>
    <span class="c1"># Leaving the indented space exist the context of the opened file, forcing</span>
    <span class="c1"># the file to be closed. This is ensured even if our code causes an error</span>
    <span class="c1"># within this indented block</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;this is a line.</span><span class="se">\n</span><span class="s1">This is a second line.</span><span class="se">\n</span><span class="s1">This is the third line.&#39;</span><span class="p">)</span>

<span class="c1"># The file is closed here.</span>
</pre></div>
</div>
<p>The syntax <code class="docutils literal"><span class="pre">with</span> <span class="pre">&lt;context_manager&gt;()</span> <span class="pre">as</span> <span class="pre">&lt;context_variable&gt;:</span></code> signifies
the creation of a context with the object <code class="docutils literal"><span class="pre">&lt;context_variable&gt;</span></code> . In
this case <code class="docutils literal"><span class="pre">open</span></code> is the context manager, and the variable we named
<code class="docutils literal"><span class="pre">f</span></code> is the file-object that is opened within that context, which is
delimited by the subsequent indented space. You can also call <code class="docutils literal"><span class="pre">open</span></code>
directly from a <code class="docutils literal"><span class="pre">Path</span></code> instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">path_to_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;this is a line.</span><span class="se">\n</span><span class="s1">This is a second line.</span><span class="se">\n</span><span class="s1">This is the third line.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The complete documentation for <code class="docutils literal"><span class="pre">open</span></code> can be found
<a class="reference external" href="https://docs.python.org/3/library/functions.html#open">here</a>.</p>
<div class="section" id="Specifying-the-Open-Mode">
<h3>Specifying the Open-Mode<a class="headerlink" href="#Specifying-the-Open-Mode" title="Permalink to this headline">¶</a></h3>
<p>Specifying <code class="docutils literal"><span class="pre">mode='w'</span></code> indicates that we will be writing to the file
anew - if the file already has any content, that content will be
<em>erased</em> before being written to. The following are the available
“modes” for opening a file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Mode</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">r</span></code></td>
<td>Open the file for reading text</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">w</span></code></td>
<td>Open the file, <strong>clearing its
contents</strong>, for writing text anew</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">a</span></code></td>
<td>Open the file to write text to
end of any existing content, thus
“appending” to the file</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">x</span></code></td>
<td>Open the file for writing text,
failing if the file already
exists</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">+</span></code></td>
<td>Open the file for both reading
and writing text</td>
</tr>
</tbody>
</table>
<p>By default, these modes will read and write text utilizing the unicode
(utf-8) decoding/encoding specification. That is, when you read data
from your file system with <code class="docutils literal"><span class="pre">mode='r'</span></code> Python will automatically
<em>decode</em> that binary data that was stored on your machine according to
utf-8, which converts the binary data to written text stored as a
string. Similarly, writing a string to a file in modes ‘w’, ‘a’, ‘x’, or
‘+’ will presume that the string should be encoded into a binary
representation (which is necessary for it to be stored as a file)
according to the utf-8 encoding scheme.</p>
<p>You can instead force Python to read and write strictly in terms of
binary data by adding a <code class="docutils literal"><span class="pre">'b'</span></code> to these modes: <code class="docutils literal"><span class="pre">'rb'</span></code>, <code class="docutils literal"><span class="pre">'wb'</span></code>,
<code class="docutils literal"><span class="pre">'ab'</span></code>, <code class="docutils literal"><span class="pre">'xb'</span></code>, <code class="docutils literal"><span class="pre">'+b'</span></code>. It is important to be aware of this binary
mode. For example, if you are saving a NumPy-array, you should open a
file in the ‘wb’ or ‘xb’ modes so that it expects binary data to be
written to it; obviously we are not saving text when we are saving a
NumPy array of numbers.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># saving a NumPy-array to the file &#39;array.npy&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="c1"># file must be open for binary-write mode</span>
<span class="c1"># since we are not saving text</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;array.npy&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Working-with-the-File-Object">
<h3>Working with the File Object<a class="headerlink" href="#Working-with-the-File-Object" title="Permalink to this headline">¶</a></h3>
<p>When we invoke <code class="docutils literal"><span class="pre">open</span></code> to open a file, we gain access to an opened file
object. The methods of this file object allow us to write-to and
read-from the opened file (assuming that we have utilized the
appropriate mode when opening it).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># demonstrating the `read` method of the file object</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_to_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">var</span><span class="p">:</span>
<span class="o">...</span>     <span class="c1"># reads the entire content of the file as a string</span>
<span class="o">...</span>     <span class="n">content</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">content</span>
<span class="s1">&#39;this is a line.</span><span class="se">\n</span><span class="s1">This is a second line.</span><span class="se">\n</span><span class="s1">This is the third line.&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="n">this</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">line</span><span class="o">.</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">second</span> <span class="n">line</span><span class="o">.</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">third</span> <span class="n">line</span><span class="o">.</span>
</pre></div>
</div>
<p>The following summarizes some of the methods available to this file
object:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">read()</span></code>: Read the entire content of the file as a string or as
bytes (depending on the open-mode)</li>
<li><code class="docutils literal"><span class="pre">readline()</span></code>: Read the next line of text from the file, including
the trailing <code class="docutils literal"><span class="pre">'\n'</span></code> character</li>
<li><code class="docutils literal"><span class="pre">readlines()</span></code>: Read in the lines of text from the file, storing
each line as an string in a list.</li>
<li><code class="docutils literal"><span class="pre">write(x)</span></code>: Write <code class="docutils literal"><span class="pre">x</span></code> (a string) to the file.</li>
<li><code class="docutils literal"><span class="pre">writelines(x)</span></code>: Given an iterable of strings, treat each string as
a line of text to be written to the file (the inverse of
<code class="docutils literal"><span class="pre">readlines</span></code>)</li>
</ul>
<p>Also, it is important to note that the file object can be <em>iterated
over</em>, and that each iteration will return an individual line of text
from the file. This is the best way to read through an entire file
line-by-line.</p>
</div>
</div>
<div class="section" id="Example:-Writing-and-Reading-a-Text-File">
<h2>Example: Writing and Reading a Text File<a class="headerlink" href="#Example:-Writing-and-Reading-a-Text-File" title="Permalink to this headline">¶</a></h2>
<p>Given the following string:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">some_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;A bagel rolled down the hill.</span>
<span class="go">I mean *all* the way down the hill.</span>
<span class="go">A lady watched it roll.</span>
<span class="go">Way to help me out.&quot;&quot;&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">some_text</span>
<span class="go">&#39;A bagel rolled down the hill.\nI mean *all* the way down the hill.\nA lady watched it roll.\nWay to help me out.&#39;</span>
</pre></div>
</div>
<p>Write that string to a file, “a_poem.txt”:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># use mode-x to ensure that we don&#39;t overwrite the file</span>
<span class="c1"># if it already exists</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;a_poem.txt&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_open_file</span><span class="p">:</span>
    <span class="n">my_open_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">some_text</span><span class="p">)</span>
</pre></div>
</div>
<p>Now read in each line of the file and append that line to the list
<code class="docutils literal"><span class="pre">out</span></code>, but <em>only if that line starts with the letter ‘A’</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;a_poem.txt&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_open_file</span><span class="p">:</span>
    <span class="c1"># recall: iterating over the file-object yields each line of the file</span>
    <span class="c1"># one line at a time</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">my_open_file</span> <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># verify that the output is what we expect</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">out</span>
<span class="p">[</span><span class="s1">&#39;A bagel rolled down the hill.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;A lady watched it roll.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="Example:-Writing-and-Reading-NumPy-Arrays">
<h2>Example: Writing and Reading NumPy Arrays<a class="headerlink" href="#Example:-Writing-and-Reading-NumPy-Arrays" title="Permalink to this headline">¶</a></h2>
<p>First, note that NumPy’s standard binary file type, used to store array
data, is known as ‘.npy’ file. The NumPy binary archive format, which
stores multiple arrays in one file, is known as the ‘.npz’ format.</p>
<p>Let’s save the array <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.array([1,</span> <span class="pre">2,</span> <span class="pre">3])</span></code> to the binary file (not
a text file) “my_array.npz”.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="c1"># we aren&#39;t saving text thus we must open</span>
<span class="c1"># our file in binary-write mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;my_array.npy&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
     <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let’s load this array from the binary file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># once again, the file must be opened to read</span>
<span class="c1"># binary data, not text data</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;my_array.npy&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
     <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([1, 2, 3])</span>
</pre></div>
</div>
<p>Finally, let’s save multiple arrays to a single archive file
“my_archive.npz”.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">a0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;my_archive.npz&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_archive_file</span><span class="p">:</span>
    <span class="c1"># you can use keyword arguments to specify the names used</span>
    <span class="c1"># to store the array in the archive</span>
    <span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="n">my_archive_file</span><span class="p">,</span> <span class="n">array_0</span><span class="o">=</span><span class="n">a0</span><span class="p">,</span> <span class="n">array_1</span><span class="o">=</span><span class="n">a1</span><span class="p">,</span> <span class="n">array_2</span><span class="o">=</span><span class="n">a2</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">np.load</span></code> can be used as a context manager in lieu of <code class="docutils literal"><span class="pre">open</span></code>. The
file-object that it produces is our archive of numpy arrays, and it
provides a dictionary-like interface for accessing these arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;my_archive.npz&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_archive_file</span><span class="p">:</span>
    <span class="n">out0</span> <span class="o">=</span> <span class="n">my_archive_file</span><span class="p">[</span><span class="s2">&quot;array_0&quot;</span><span class="p">]</span>
    <span class="n">out1</span> <span class="o">=</span> <span class="n">my_archive_file</span><span class="p">[</span><span class="s2">&quot;array_1&quot;</span><span class="p">]</span>
    <span class="n">out2</span> <span class="o">=</span> <span class="n">my_archive_file</span><span class="p">[</span><span class="s2">&quot;array_2&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">out0</span>
<span class="go">array([1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out1</span>
<span class="go">array([4, 5, 6])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out2</span>
<span class="go">array([7, 8, 9])</span>
</pre></div>
</div>
</div>
<div class="section" id="Links-to-Official-Documentation">
<h2>Links to Official Documentation<a class="headerlink" href="#Links-to-Official-Documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://docs.python.org/3/library/pathlib.html">The ‘pathlib’
module</a></li>
<li><a class="reference external" href="https://docs.python.org/3/library/functions.html#open">The ‘open’
function</a></li>
<li><a class="reference external" href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files">Official tutorial: reading and writing
files</a></li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="Matplotlib.html" class="btn btn-neutral" title="Matplotlib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Ryan Soklaski.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.13.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-115029372-1"></script>
      <script type="text/javascript" src="../_static/gtag.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>